<section class="mx-5">
  <h1 class="text-2xl font-bold">Pipes personalizados</h1>
  <h3 class="text-xl font-thin">Pipes no incluidos en Angular</h3>
</section>

<div class="stats shadow">
  <div class="stat">
    <div class="stat-title">ToggleCase Pipe</div>
    <!-- 
      ToggleCase Pipe: Pipe personalizado que transforma el texto a mayúsculas o minúsculas.
      - name() devuelve el nombre actual.
      - upperCase() indica si debe ir en mayúsculas (true) o minúsculas (false).
      - Si upperCase() es true: muestra el nombre en MAYÚSCULAS.
      - Si upperCase() es false: muestra el nombre en minúsculas.
    -->
    <div class="stat-value">{{ nombre() | toggleCase : usarMayusculas() }}</div>
    <!-- Muestra el nombre original sin transformar -->
    <div class="stat-desc"> nombre original sin transformar-> {{ nombre() }}</div>


      <!-- 
      Botón para alternar entre mayúsculas y minúsculas.
      Al hacer click, cambia el valor de upperCase() entre true y false. al poner! 
      Esto actualiza el pipe y cambia la visualización del nombre.
    -->
    <button (click)="usarMayusculas.set(!usarMayusculas())" class="btn btn-primary mt-2">
      ToggleCase
    </button>
  </div>
</div>

<div class="divider my-2"></div>

<section class="my-2">
  <h1 class="text-2xl font-bold">
    Filtrando por: {{ busquedaQuery() }} ordenando por: {{ ordenarPor() }}
  </h1>

  <div class="flex gap-2 justify-end w-full mt-2">
    <input
      type="text"
      class="input input-bordered w-full max-w-xs"
      placeholder="Buscar héroe"
      (input)="busquedaQuery.set(txtSearch.value)"
      #txtSearch
    />

    <div class="flex flex-1"></div>

    <button (click)="ordenarPor.set('name')" class="btn btn-primary"> Por nombre </button>
    <button (click)="ordenarPor.set('canFly')" class="btn btn-accent"> Por volar</button>
    <button (click)="ordenarPor.set('color')" class="btn btn-secondary"> Por color</button>
    <button (click)="ordenarPor.set('creator')" class="btn btn-info">Por creador</button>
    
  </div>
</section>

<section class="overflow-x-auto w-full">
  <table class="table table-xs w-full">
    <!-- head -->
    <thead>
      <tr>
        <th>#</th>
        <th>Nombre</th>
        <th>Puede volar</th>
        <th>Color</th>
        <th>Creador</th>
      </tr>
    </thead>
    <tbody>

      @for (hero of heroes() | heroFilter:busquedaQuery() | heroSortBy:ordenarPor() ;
      track hero.id; let i = $index) {
      <tr>
        <td>{{ i + 1 }}</td>
        <td>
          {{ hero.name }}
        </td>
        <td>
          <span
            class="text-xs w-44"
            [class.text-success]="hero.canFly"
            [class.text-accent]="!hero.canFly"
          >
            {{ hero.canFly | canFly }}
            <!--Puede volar = si es true | No puede volar -->
          </span>
        </td>
        <td>
          <!-- pipe que recibe un color y devuelve el string del color para ponerlo de ese color (clase -->
          <span class="text-xs w-44" [style.color]="hero.color | heroTextColor">
            <!-- poner tittleCase para q el 1 letra este en mayuscula -->
            {{ hero.color | heroColor | titlecase }}
          </span>
        
        </td>
        <td>
          <!--  para cambiar los colores -->
          <span
            [class.text-primary]="hero.creator === 0"
            [class.text-accent]="hero.creator === 1"
          >
            {{ hero.creator | heroCreator }}
          </span>
        </td>
      </tr>
      }
    </tbody> 
  </table>
</section>